#!groovy

pipeline {
  agent { node { label 'linux' } }
  options { durabilityHint( 'PERFORMANCE_OPTIMIZED' ) }
  stages {
    stage("Jetty-9.4.15.v20190215-100") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.15.v20190215'),
                  string(name: 'LOADER_RATE', value: '100')
          ]
        }
      }
    }
    stage("Jetty-9.4.15.v20190215-300") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.15.v20190215'),
                  string(name: 'LOADER_RATE', value: '300')
          ]
        }
      }
    }
    stage("Jetty-9.4.15.v20190215-500") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.15.v20190215'),
                  string(name: 'LOADER_RATE', value: '500')
          ]
        }
      }
    }

    stage("Jetty-9.4.29-SNAPSHOT-100") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.29-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '100')
          ]
        }
      }
    }
    stage("Jetty-9.4.29-SNAPSHOT-300") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.29-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '300')
          ]
        }
      }
    }
    stage("Jetty-9.4.29-SNAPSHOT-500") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'9.4.29-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '500')
          ]
        }
      }
    }

    stage("Jetty-10.0.0-SNAPSHOT-100") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'10.0.0-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '100')
          ]
        }
      }
    }
    stage("Jetty-10.0.0-SNAPSHOT-300") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'10.0.0-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '300')
          ]
        }
      }
    }
    stage("Jetty-10.0.0-SNAPSHOT-500") {
      steps {
        script {
          build job: 'load-test-pipeline', parameters: [
                  string(name: 'JETTY_VERSION', value:'10.0.0-SNAPSHOT'),
                  string(name: 'LOADER_RATE', value: '500')
          ]
        }
      }
    }

    // temporary to get data
// cannot work with 9.4.7 as we use API introduced with 9.4.8
//    stage("Jetty-9.4.7.v20170914-100") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.7.v20170914'),
//                  string(name: 'LOADER_RATE', value: '100')
//          ]
//        }
//      }
//    }
//    stage("Jetty-9.4.7.v20170914-300") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.7.v20170914'),
//                  string(name: 'LOADER_RATE', value: '300')
//          ]
//        }
//      }
//    }
//    stage("Jetty-9.4.7.v20170914-500") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.7.v20170914'),
//                  string(name: 'LOADER_RATE', value: '500')
//          ]
//        }
//      }
//    }
//
//    stage("Jetty-9.4.8.v20171121-100") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.8.v20171121'),
//                  string(name: 'LOADER_RATE', value: '100')
//          ]
//        }
//      }
//    }
//    stage("Jetty-9.4.8.v20171121-300") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.8.v20171121'),
//                  string(name: 'LOADER_RATE', value: '300')
//          ]
//        }
//      }
//    }
//    stage("Jetty-9.4.8.v20171121-500") {
//      steps {
//        script {
//          build job: 'load-test-pipeline', parameters: [
//                  string(name: 'JETTY_VERSION', value:'9.4.8.v20171121'),
//                  string(name: 'LOADER_RATE', value: '500')
//          ]
//        }
//      }
//    }

  }
}

